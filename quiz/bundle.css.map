{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../App.svelte",
    "../Question.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { onDestroy, onMount } from \"svelte\";\n  import Question from \"./Question.svelte\";\n\n  const appName = \"Charles' Cool Quiz\";\n  const questionsToLoad = 10;\n  let categoryId = 9;\n  const categories = [\n    { name: \"General Knowledge\", id: 9 },\n    { name: \"Science & Nature\", id: 17 },\n    { name: \"History\", id: 23 },\n    { name: \"Geography\", id: 22 }\n  ];\n\n  let quizLoading;\n  let quizStarted;\n  let showLoadMore;\n  let questions;\n  let visible_question;\n  let score;\n\n  let currentIndex = 0;\n  let noanswered = 0;\n  let qulength = 1;\n  $: percentage = noanswered > 0 ? Math.round((score / noanswered) * 100) : 0;\n\n  async function getQuestions() {\n    const response = await fetch(\n      `https://opentdb.com/api.php?amount=${questionsToLoad}&category=${categoryId}&type=multiple`\n    );\n    if (response.ok) {\n      const result = await response.json();\n      return result;\n    } else {\n      const error = await response.json();\n      throw error;\n    }\n  }\n\n  function startQuiz(category) {\n    categoryId = category.id;\n    quizLoading = true;\n    getQuestions().then(\n      result => {\n        questions = result.results;\n        quizLoading = false;\n        quizStarted = true;\n        score = 0;\n        noanswered = 0;\n        qulength = questions.length;\n        visible_question = questions[currentIndex];\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  }\n\n  function loadMore() {\n    if (quizLoading === false) {\n      quizLoading = true;\n      showLoadMore = false;\n\n      getQuestions().then(result => {\n        quizLoading = false;\n        let newquestions = result.results;\n        newquestions.forEach(nq => {\n          questions.push(nq);\n        });\n        questions = questions;\n        qulength = questions.length;\n        loadNext();\n      });\n    }\n  }\n\n  function loadNext() {\n    visible_question = null;\n\n    setTimeout(() => {\n      if (currentIndex + 1 < questions.length) {\n        currentIndex++;\n        visible_question = questions[currentIndex];\n      } else {\n        // FINISHED\n        showLoadMore = true;\n      }\n    }, 100);\n  }\n\n  function questionAnswered(e) {\n    const q = e.detail;\n    noanswered++;\n    if (q.correct) {\n      score++;\n    }\n    loadNext();\n  }\n\n  //  schedules a callback to run as soon as the component has been mounted to the DOM.\n  onMount(() => {});\n\n  //  when component is destroy, unsubscribe from any subscriptions to prevent memory leaks\n  onDestroy(() => {});\n</script>\n\n<style>\n  header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n  }\n  main {\n    padding-top: 80px;\n    padding-bottom: 80px;\n  }\n  .loading {\n    text-align: center;\n  }\n  .button_block {\n    padding: 20px;\n    font-size: 2.5em;\n  }\n\n  .categories {\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    justify-content: center;\n  }\n  .categories .button {\n    margin: 0 7.5px 15px;\n  }\n</style>\n\n<header>\n\n  <h1>{appName}</h1>\n  <nav>\n    {#if quizStarted}Score: {score} ( {percentage}%){/if}\n\n  </nav>\n\n</header>\n\n<main>\n\n  <div class=\"container\">\n\n    {#if !quizStarted}\n      <div class=\"categories\">\n        {#each categories as category}\n          <a\n            href=\"#startquiz\"\n            class=\"button button_block \"\n            on:click|preventDefault={() => startQuiz(category)}>\n            {category.name}\n          </a>\n        {/each}\n      </div>\n    {/if}\n\n    {#if visible_question}\n      <Question\n        question={visible_question}\n        delay={100}\n        on:answered={questionAnswered} />\n    {/if}\n\n    {#if showLoadMore}\n      <a\n        href=\"#loadmore\"\n        on:click|preventDefault={loadMore}\n        class=\"button button_block\">\n        You scored {score} out of {noanswered}. Load more questions ?\n      </a>\n    {/if}\n\n    {#if quizLoading}\n      <p class=\"loading\">Loading....</p>\n    {/if}\n\n  </div>\n\n</main>\n",
    "<script>\n  import { fly } from \"svelte/transition\";\n  import { createEventDispatcher } from \"svelte\";\n\n  // bubble up an event to the parent component\n  const dispatch = createEventDispatcher();\n\n  export let question;\n  export let delay = 0;\n  let answers; // {text: string}[]\n  let canAnswer;\n  $: if (question) {\n    canAnswer = true;\n    if (!answers) {\n      setAnswers();\n    }\n  }\n\n  function setAnswers() {\n    const all = [];\n    question.incorrect_answers.forEach(a => {\n      all.push({ text: a, correct: null });\n    });\n    all.push({ text: question.correct_answer, correct: null });\n    answers = all.sort(function() {\n      return 0.5 - Math.random();\n    });\n  }\n\n  function chooseAnswer(answer) {\n    if (canAnswer) {\n      canAnswer = false;\n      if (answer.text === question.correct_answer) {\n        answer.correct = true;\n        question.correct = true;\n      } else {\n        answer.correct = false;\n        answers\n          .filter(a => a.text === question.correct_answer)\n          .forEach(a => {\n            a.correct = true;\n          });\n      }\n      answers = answers;\n\n      setTimeout(() => {\n        dispatch(\"answered\", question);\n      }, 1000);\n    }\n  }\n</script>\n\n<style>\n  ul {\n    font-size: 2.2em;\n  }\n  li {\n    font-size: 1em;\n    border: 1px solid #ddd;\n    padding: 15px;\n    margin: 0 0 10px;\n    cursor: pointer;\n    transition: all 0.3s;\n  }\n  li:hover {\n    background-color: #eee;\n  }\n\n  li.correct {\n    background-color: #cfc;\n  }\n  li.incorrect {\n    background-color: #fcc;\n  }\n</style>\n\n<div class=\"box\" in:fly={{ delay: delay, duration: 500, y: 20, opacity: 0 }}>\n  <h2>\n    {@html question.question}\n  </h2>\n\n  <ul class=\"possible\">\n    {#each answers as answer, i}\n      <li\n        class:correct={answer.correct === true}\n        class:incorrect={answer.correct === false}\n        on:click|preventDefault={() => chooseAnswer(answer)}>\n        {@html answer.text}\n      </li>\n    {/each}\n  </ul>\n\n</div>\n"
  ],
  "names": [],
  "mappings": "AA2GE,MAAM,4BAAC,CAAC,AACN,QAAQ,CAAE,KAAK,CACf,GAAG,CAAE,CAAC,CACN,IAAI,CAAE,CAAC,CACP,KAAK,CAAE,IAAI,AACb,CAAC,AACD,IAAI,4BAAC,CAAC,AACJ,WAAW,CAAE,IAAI,CACjB,cAAc,CAAE,IAAI,AACtB,CAAC,AACD,QAAQ,4BAAC,CAAC,AACR,UAAU,CAAE,MAAM,AACpB,CAAC,AACD,aAAa,4BAAC,CAAC,AACb,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,WAAW,4BAAC,CAAC,AACX,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,IAAI,CACf,WAAW,CAAE,MAAM,CACnB,eAAe,CAAE,MAAM,AACzB,CAAC,AACD,yBAAW,CAAC,OAAO,cAAC,CAAC,AACnB,MAAM,CAAE,CAAC,CAAC,KAAK,CAAC,IAAI,AACtB,CAAC;AChFD,EAAE,eAAC,CAAC,AACF,SAAS,CAAE,KAAK,AAClB,CAAC,AACD,EAAE,eAAC,CAAC,AACF,SAAS,CAAE,GAAG,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,OAAO,CAAE,IAAI,CACb,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAChB,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,GAAG,CAAC,IAAI,AACtB,CAAC,AACD,iBAAE,MAAM,AAAC,CAAC,AACR,gBAAgB,CAAE,IAAI,AACxB,CAAC,AAED,EAAE,QAAQ,eAAC,CAAC,AACV,gBAAgB,CAAE,IAAI,AACxB,CAAC,AACD,EAAE,UAAU,eAAC,CAAC,AACZ,gBAAgB,CAAE,IAAI,AACxB,CAAC"
}